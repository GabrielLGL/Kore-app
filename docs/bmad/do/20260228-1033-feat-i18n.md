# feat(i18n) — Option de langue FR/EN
Date : 2026-02-28 10:33

## Instruction
Implémenter le plan i18n complet : option de langue (Français / English) dans les Settings et l'Onboarding.

## Rapport source
docs/bmad/prompts/ (plan interne de la session)

## Classification
Type : feat
Fichiers modifiés :
- mobile/src/model/schema.ts (v26, colonne language_mode)
- mobile/src/model/models/User.ts (champ languageMode)
- mobile/src/i18n/fr.ts (NOUVEAU — toutes les chaînes FR)
- mobile/src/i18n/en.ts (NOUVEAU — toutes les chaînes EN)
- mobile/src/i18n/index.ts (NOUVEAU — types Language, Translations)
- mobile/src/contexts/LanguageContext.tsx (NOUVEAU — context + useLanguage)
- mobile/__mocks__/LanguageContextMock.ts (NOUVEAU — mock Jest)
- mobile/jest.config.js (ajout moduleNameMapper LanguageContext)
- mobile/src/navigation/index.tsx (LanguageProvider, titres dynamiques)
- mobile/src/screens/OnboardingScreen.tsx (step 0 : choix langue)
- mobile/src/screens/SettingsScreen.tsx (toggle FR/EN)
- mobile/src/screens/HomeScreen.tsx
- mobile/src/screens/StatsScreen.tsx
- mobile/src/screens/BadgesScreen.tsx
- mobile/src/screens/ProgramsScreen.tsx
- mobile/src/screens/ProgramDetailScreen.tsx
- mobile/src/screens/SessionDetailScreen.tsx
- mobile/src/screens/ExercisesScreen.tsx
- mobile/src/screens/WorkoutScreen.tsx
- mobile/src/screens/AssistantScreen.tsx
- mobile/src/screens/AssistantPreviewScreen.tsx
- mobile/src/screens/ExerciseHistoryScreen.tsx
- mobile/src/screens/__tests__/OnboardingScreen.test.tsx (step 0 dans les tests)
- mobile/src/screens/__tests__/ExercisesScreen.test.tsx (textes traduits)
- mobile/src/screens/__tests__/ProgramDetailScreen.test.tsx (typage navigation)

## Ce qui a été fait
- Schéma DB : v25 → v26, colonne `language_mode` dans users
- Model User : champ `@text('language_mode') languageMode`
- i18n infrastructure : fr.ts + en.ts + index.ts + LanguageContext (pattern ThemeContext)
- LanguageProvider dans navigation/index.tsx, lit la langue persistée au démarrage
- OnboardingScreen : nouvelle étape 0 "Choisir la langue" (3 points de progression)
- SettingsScreen : boutons FR/EN dans la section Apparence
- Tous les écrans majeurs traduits via useLanguage() / t.*
- AssistantPreviewScreen + ExerciseHistoryScreen traduits
- Correction : fr.ts sans `as const` pour que typeof fr soit string (non-littéral)
- Ajout LanguageContextMock.ts + moduleNameMapper pour les tests Jest
- Correction tests OnboardingScreen (step 0 → step 1 avant les interactions niveau)
- Correction tests ExercisesScreen ("Renommer" → "Modifier l'exercice")
- Correction tests ProgramsScreen (deleteMessage ajouté à fr.ts/en.ts)
- Fix pré-existant : ProgramDetailScreen.test.tsx typage `as never` → `as unknown as NativeStackNavigationProp`

## Vérification
- TypeScript : ✅ 0 erreur
- Tests : ✅ 1561 passed / 2 failed (pré-existants : ProgramDetailScreen.test.tsx et statsHelpers.test.ts — confirmé avant nos changements)
- Nouveau test créé : non (tests existants mis à jour)

## Documentation mise à jour
- MEMORY.md (schéma v26, i18n)

## Statut
✅ Résolu — 20260228-1033

## Commit
[sera rempli à l'étape 7]
