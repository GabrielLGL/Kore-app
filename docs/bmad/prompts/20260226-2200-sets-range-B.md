<!-- v1.0 — 2026-02-26 -->
# Rapport — sets-range — Groupe B (UI ExerciseTargetInputs) — 20260226-2200

## Objectif
Modifier `ExerciseTargetInputs` pour afficher un **champ de range de séries** :
deux inputs côte à côte (min et max) avec un tiret entre eux.
Si max est vide → séance avec nombre fixe de séries. Si max est renseigné → range.

## Fichiers concernés
- `mobile/src/components/ExerciseTargetInputs.tsx`

## Contexte technique

### Interface actuelle
```typescript
interface ExerciseTargetInputsProps {
  sets: string
  reps: string
  weight: string
  onSetsChange: (value: string) => void
  onRepsChange: (value: string) => void
  onWeightChange: (value: string) => void
  showLabels?: boolean
  autoFocus?: boolean
}
```

### Layout actuel
3 inputs côte à côte : [Séries] [Reps] [Poids (kg)]

Chaque input est dans un `View` avec `flex: 1`.

### Contraintes de clamping actuelles
- Séries : entier 1–10 (ou vide)
- Reps : entier 1–99 (ou vide)
- Poids : float 0–999 (ou vide)

### Patterns React Native à respecter
- `useColors()` hook — jamais de couleurs hardcodées
- `spacing`, `fontSize`, `borderRadius` du theme
- `keyboardType="numeric"` pour tous les inputs numériques
- Composants fonctionnels uniquement

## Étapes

### 1. Ajouter les props `setsMax` et `onSetsMaxChange`
```typescript
interface ExerciseTargetInputsProps {
  sets: string
  setsMax?: string                        // ← NOUVEAU (optionnel)
  reps: string
  weight: string
  onSetsChange: (value: string) => void
  onSetsMaxChange?: (value: string) => void  // ← NOUVEAU (optionnel)
  onRepsChange: (value: string) => void
  onWeightChange: (value: string) => void
  showLabels?: boolean
  autoFocus?: boolean
}
```

### 2. Ajouter `handleSetsMaxChange`
```typescript
const handleSetsMaxChange = (value: string) => {
  if (!onSetsMaxChange) return
  if (value === '') { onSetsMaxChange(value); return }
  const num = parseInt(value, 10)
  if (isNaN(num)) return
  onSetsMaxChange(String(Math.min(Math.max(num, 1), 10)))
}
```
Note: setsMax doit être ≥ setsMin (validation métier dans Group C/validationHelpers).
Dans ce composant, on clamp juste 1–10. La validation de cohérence min≤max est en dehors.

### 3. Modifier le layout pour les séries
Le label doit indiquer qu'il s'agit d'une range : "Séries" reste le label global.
Si `onSetsMaxChange` est fourni (mode range), afficher deux inputs :
```
[Label: Séries]
[ min ] — [ max ]
```
Sinon (mode simple), afficher un seul input comme actuellement.

Design suggéré pour le mode range :
```tsx
<View style={styles.setsWrapper}>
  {showLabels && <Text style={styles.label}>Séries</Text>}
  <View style={styles.setsRangeRow}>
    <TextInput
      style={[styles.input, styles.setsInput]}
      keyboardType="numeric"
      value={sets}
      onChangeText={handleSetsChange}
      placeholder="min"
      placeholderTextColor={colors.placeholder}
      autoFocus={autoFocus}
    />
    {onSetsMaxChange && (
      <>
        <Text style={styles.rangeSeparator}>—</Text>
        <TextInput
          style={[styles.input, styles.setsInput]}
          keyboardType="numeric"
          value={setsMax ?? ''}
          onChangeText={handleSetsMaxChange}
          placeholder="max"
          placeholderTextColor={colors.placeholder}
        />
      </>
    )}
  </View>
</View>
```

Styles supplémentaires :
```typescript
setsWrapper: {
  flex: 1,
  marginRight: spacing.sm,
},
setsRangeRow: {
  flexDirection: 'row',
  alignItems: 'center',
  gap: spacing.xs,
},
setsInput: {
  flex: 1,
  marginBottom: spacing.md, // déjà dans input
},
rangeSeparator: {
  color: colors.textSecondary,
  fontSize: fontSize.md,
  marginBottom: spacing.md, // aligné avec input
},
```

### 4. Mettre à jour le JSDoc
Mettre à jour le commentaire JSDoc en haut du composant pour documenter `setsMax` et `onSetsMaxChange`.

## Contraintes
- Ne PAS casser la signature actuelle — `setsMax` et `onSetsMaxChange` sont **optionnels**.
- Si `onSetsMaxChange` est absent (undefined), le composant affiche UN seul input séries comme avant → backward compatible.
- `marginBottom: spacing.md` déjà dans `input` — le `rangeSeparator` doit avoir le même `marginBottom` pour s'aligner verticalement.
- Ne PAS modifier les inputs Reps et Poids.

## Critères de validation
- `npx tsc --noEmit` → zéro erreur
- `npm test` → zéro fail
- Avec `onSetsMaxChange` absent → layout identique à avant (3 inputs côte à côte)
- Avec `onSetsMaxChange` fourni → 4 inputs (min séries — max séries — reps — poids)

## Dépendances
Aucune — groupe indépendant. Peut être lancé en parallèle avec Groupe A.

## Statut
✅ Résolu — 20260226-2200

## Résolution
Rapport do : docs/bmad/do/20260226-2200-feat-sets-range-B.md
