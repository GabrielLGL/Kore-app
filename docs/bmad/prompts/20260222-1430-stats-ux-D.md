<!-- v1.0 — 2026-02-22 -->
# Rapport — Stats UX — Groupe D — 20260222-1430

## Objectif
Ajouter un tri par muscle et type d'équipement + une recherche par nom dans l'écran Exercices & Records.

## Fichiers concernés
- `mobile/src/screens/StatsExercisesScreen.tsx`

## Contexte technique
- L'écran affiche 2 sections : Records personnels (PRs) + Top exercices par fréquence
- Les données viennent de `computePRsByExercise()` et `computeTopExercisesByFrequency()` (dans `statsHelpers.ts`)
- Ces fonctions retournent des tableaux avec `exerciseId`, `exerciseName`, etc.
- Les exercices sont injectés via `withObservables` et ont les champs : `name`, `muscles` (string[]), `equipment` (string[])
- Composants réutilisables disponibles :
  - `<ChipSelector>` de `components/ChipSelector.tsx` — chips scrollables horizontaux
  - `MUSCLES_LIST` et `EQUIPMENT_LIST` de `model/constants.ts`
- Pattern de filtre déjà utilisé dans `ChartsScreen.tsx` avec `useExerciseFilters` hook

### Listes de filtres
```ts
MUSCLES_LIST = ['Pecs', 'Dos', 'Quadriceps', 'Ischios', 'Mollets', 'Trapèzes', 'Epaules', 'Biceps', 'Triceps', 'Abdos', 'Cardio']
EQUIPMENT_LIST = ['Poids libre', 'Machine', 'Poulies', 'Poids du corps']
```

### Données exercice
Chaque `Exercise` a :
- `name: string`
- `muscles: string` (comma-separated, ex: "Pecs,Triceps")
- `equipment: string` (comma-separated, ex: "Poids libre")

Attention : `muscles` et `equipment` sont stockés comme des strings comma-separated, pas des arrays.

## Etapes
1. Lire `StatsExercisesScreen.tsx` pour comprendre la structure actuelle
2. Ajouter 3 states de filtre :
   - `filterMuscle: string | null` (null = tous)
   - `filterEquipment: string | null` (null = tous)
   - `searchQuery: string` (vide = pas de recherche)
3. Ajouter en haut de l'écran (avant les sections) :
   - Un `TextInput` de recherche avec placeholder "Rechercher un exercice..."
   - Un `<ChipSelector>` pour les muscles avec `noneLabel="Tous muscles"`
   - Un `<ChipSelector>` pour l'équipement avec `noneLabel="Tout équipement"`
4. Filtrer les résultats de `prs` et `topFrequency` en fonction des filtres :
   - Créer un Set d'exerciseIds qui matchent les filtres
   - Un exercice match si :
     - Son nom contient `searchQuery` (insensible à la casse)
     - Son `muscles` contient `filterMuscle` (si non null)
     - Son `equipment` contient `filterEquipment` (si non null)
   - Filtrer `prs` et `topFrequency` par ces exerciseIds
5. Styler le TextInput comme les autres inputs de l'app (backgroundColor: `colors.card`, borderRadius, etc.)
6. Vérifier `npx tsc --noEmit`

## Contraintes
- Ne PAS modifier `statsHelpers.ts`
- Utiliser `<ChipSelector>` existant (ne pas créer un nouveau composant)
- Importer `MUSCLES_LIST` et `EQUIPMENT_LIST` depuis `model/constants.ts`
- Les filtres doivent être appliqués aux deux sections (PRs ET fréquence)
- Si aucun résultat après filtre → afficher "Aucun résultat pour ces filtres."

## Criteres de validation
- `npx tsc --noEmit` -> zero erreur
- Filtrer par muscle affiche seulement les exercices de ce muscle
- Filtrer par équipement affiche seulement les exercices de ce type
- La recherche filtre par nom (insensible à la casse)
- Les 3 filtres se combinent (AND)
- Retirer tous les filtres restaure la vue complète

## Dependances
Aucune dépendance

## Statut
✅ Résolu — 20260222-1500

## Résolution
Rapport do : docs/bmad/do/20260222-1500-feat-stats-exercises-filters.md
