<!-- v1.0 — 2026-02-22 -->
# Rapport — Stats UX — Groupe C — 20260222-1430

## Objectif
Agrandir le calendrier d'activité et afficher les informations de la séance quand on clique sur un carré (actuellement on ne voit que "X séance(s)" — il faut montrer les détails : durée, exercices pratiqués).

## Fichiers concernés
- `mobile/src/screens/StatsCalendarScreen.tsx`

## Contexte technique
- Calendrier custom (pas de lib externe) — grille GitHub-style avec `DAY_SIZE = 12` et `DAY_GAP = 2`
- Les carrés sont des `TouchableOpacity` qui appellent `handleDayPress`
- Le tooltip actuel affiche : date + nombre de séances
- Les données viennent de `computeCalendarData(histories)` qui retourne `Map<dateKey, count>`
- Les `History` ont : `startTime`, `endTime`, `sessionName` (via relation)
- Pour afficher les détails d'une séance, il faut :
  1. Filtrer les `histories` par date cliquée
  2. Pour chaque séance trouvée, afficher la durée et le nom
- Les histories sont déjà injectées via `withObservables`

### Taille du calendrier
- `DAY_SIZE = 12` est très petit — augmenter à 18-20 pour plus de lisibilité
- `DAY_GAP = 2` → peut passer à 3
- Les labels jours (`L, M, M, J, V, S, D`) ont `fontSize: 9` → augmenter à 10-11
- La scrollView horizontale est déjà en place

## Etapes
1. Lire `StatsCalendarScreen.tsx` pour comprendre la structure complète
2. **Agrandir le calendrier** :
   - Passer `DAY_SIZE` de 12 à 20
   - Passer `DAY_GAP` de 2 à 3
   - Ajuster `dayLabel.fontSize` de 9 à 11
   - Ajuster `dayLabel.height` et `dayLabel.lineHeight` pour matcher le nouveau `DAY_SIZE`
   - Ajuster `dayLabel.width` si nécessaire
3. **Enrichir le tooltip avec détails séance** :
   - Modifier `handleDayPress` pour filtrer les `histories` par `toDateKey(new Date(h.startTime)) === day.dateKey`
   - Stocker les séances trouvées dans le tooltip state (ou un state séparé)
   - Dans le tooltip, afficher pour chaque séance :
     - Nom de la séance (si disponible via `sessionName` ou le programme lié) — sinon "Séance"
     - Durée (startTime → endTime, formatée en minutes)
   - Si repos (count = 0), afficher "Repos" comme actuellement
4. Styler le tooltip enrichi : card avec liste des séances, chaque ligne avec nom + durée
5. Vérifier `npx tsc --noEmit`

## Contraintes
- Ne pas modifier `statsHelpers.ts` (filtrer directement dans le composant)
- Garder le scroll horizontal fonctionnel
- Garder la légende en bas
- Utiliser uniquement `colors.*`, `spacing.*`, `borderRadius.*` du thème
- Pas de `<Modal>` natif

## Criteres de validation
- `npx tsc --noEmit` -> zero erreur
- Le calendrier est visuellement plus grand et lisible
- Cliquer sur un jour affiche les détails des séances (durée, nom)
- Cliquer sur un jour sans séance affiche "Repos"
- Le tooltip se toggle (cliquer à nouveau = fermer)

## Dependances
Aucune dépendance

## Statut
En attente
